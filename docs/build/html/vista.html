<!DOCTYPE html>

<html lang="es" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Módulo «vista.py» &#8212; documentación de App Relevamiento Barrial - 0.1</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8e8a900e" />
      <link rel="stylesheet" type="text/css" href="_static/css/pdj.css?v=12f78f94" />

<link rel="stylesheet" href="_static/css/darker.css" type="text/css"
      media="(prefers-color-scheme: dark)"/>
    <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'/>
    <script src="_static/documentation_options.js?v=9c9b61ad"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=f85f4cfb"></script>
    <script src="_static/js/pdj.js"></script>

    <script type="module" src="_static/js/dark-mode-toggle.js"></script>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="Módulo «controlador.py»" href="controlador.html" />
    <link rel="prev" title="Módulo «modelo.py»" href="modelo.html" /> 
  </head>  <body class="wy-body-for-nav" role="document"> 

<section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

  <nav class="wy-nav-top" id="barra-mobile" role="navigation" aria-label="top navigation">
    <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
    <a href="#">App Relevamiento Barrial </a>
  </nav>

  <div class="wy-nav-content">
    <div class="fundo-claro">
    </div>
    <div class="fundo-escuro">
    </div>

    <div class="rst-content">
      <div role="navigation" aria-label="breadcrumbs navigation">
      </div>
      <div role="main" class="">

	<div id="content" class="hfeed entry-container hentry">
      	  <div id="dark-mode-toggle-container">
	    <dark-mode-toggle appearance="toggle" class="slider" dark="" light="">
	    </dark-mode-toggle>
	  </div>
  <section id="module-vista">
<span id="modulo-vista-py"></span><h1>Módulo «vista.py»<a class="headerlink" href="#module-vista" title="Link to this heading">¶</a></h1>
<p>Vista</p>
<p>Este módulo define la interfaz gráfica de la aplicación utilizando Tkinter.
Contiene la clase Aplicacion, que administra la interacción con el usuario,
actualiza la vista (incluyendo un gráfico) y se comunica con el controlador.</p>
<dl class="py class">
<dt class="sig sig-object py" id="vista.Aplicacion">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">vista.</span></span><span class="sig-name descname"><span class="pre">Aplicacion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vista.html#Aplicacion"><span class="viewcode-link"><span class="pre">[fuente]</span></span></a><a class="headerlink" href="#vista.Aplicacion" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Clase principal de la interfaz gráfica.</p>
<p>Configura y administra la ventana principal, maneja eventos (alta, baja, modificación, consulta)
y actualiza tanto el Treeview como el gráfico mostrado.</p>
<dl class="py method">
<dt class="sig sig-object py" id="vista.Aplicacion.actualizar">
<span class="sig-name descname"><span class="pre">actualizar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">evento</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vista.html#Aplicacion.actualizar"><span class="viewcode-link"><span class="pre">[fuente]</span></span></a><a class="headerlink" href="#vista.Aplicacion.actualizar" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vista.Aplicacion.actualizar_grafico">
<span class="sig-name descname"><span class="pre">actualizar_grafico</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/vista.html#Aplicacion.actualizar_grafico"><span class="viewcode-link"><span class="pre">[fuente]</span></span></a><a class="headerlink" href="#vista.Aplicacion.actualizar_grafico" title="Link to this definition">¶</a></dt>
<dd><p>Actualiza el gráfico mostrado en la interfaz.</p>
<p>Crea un gráfico de barras que representa los niveles educativos de los registros.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vista.Aplicacion.actualizar_vista">
<span class="sig-name descname"><span class="pre">actualizar_vista</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/vista.html#Aplicacion.actualizar_vista"><span class="viewcode-link"><span class="pre">[fuente]</span></span></a><a class="headerlink" href="#vista.Aplicacion.actualizar_vista" title="Link to this definition">¶</a></dt>
<dd><p>Actualiza el Treeview con los registros actuales de la base de datos.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vista.Aplicacion.alta">
<span class="sig-name descname"><span class="pre">alta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vista.html#Aplicacion.alta"><span class="viewcode-link"><span class="pre">[fuente]</span></span></a><a class="headerlink" href="#vista.Aplicacion.alta" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vista.Aplicacion.borrar">
<span class="sig-name descname"><span class="pre">borrar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vista.html#Aplicacion.borrar"><span class="viewcode-link"><span class="pre">[fuente]</span></span></a><a class="headerlink" href="#vista.Aplicacion.borrar" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vista.Aplicacion.consulta">
<span class="sig-name descname"><span class="pre">consulta</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/vista.html#Aplicacion.consulta"><span class="viewcode-link"><span class="pre">[fuente]</span></span></a><a class="headerlink" href="#vista.Aplicacion.consulta" title="Link to this definition">¶</a></dt>
<dd><p>Gestiona la consulta de registros.</p>
<p>Recupera los datos de la base de datos y actualiza tanto el Treeview como el gráfico.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="vista.Aplicacion.modificar">
<span class="sig-name descname"><span class="pre">modificar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vista.html#Aplicacion.modificar"><span class="viewcode-link"><span class="pre">[fuente]</span></span></a><a class="headerlink" href="#vista.Aplicacion.modificar" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="vista.validar_campos">
<span class="sig-prename descclassname"><span class="pre">vista.</span></span><span class="sig-name descname"><span class="pre">validar_campos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/vista.html#validar_campos"><span class="viewcode-link"><span class="pre">[fuente]</span></span></a><a class="headerlink" href="#vista.validar_campos" title="Link to this definition">¶</a></dt>
<dd><p>Decorador para validar que los campos de entrada no estén vacíos.</p>
</dd></dl>

<section id="descripcion-general">
<h2>Descripción general<a class="headerlink" href="#descripcion-general" title="Link to this heading">¶</a></h2>
<p>Este módulo define la interfaz gráfica de la aplicación utilizando Tkinter.
Contiene la clase <cite>Aplicacion</cite>, que administra la interacción con el usuario,
actualiza la vista (incluyendo un gráfico) y se comunica con el controlador.</p>
</section>
<section id="codigo-fuente">
<h2>Código fuente<a class="headerlink" href="#codigo-fuente" title="Link to this heading">¶</a></h2>
<p>A continuación, se presenta el código fuente del módulo <cite>vista.py</cite>:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Código fuente de vista.py</span><a class="headerlink" href="#id1" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">  2</span><span class="sd">Vista</span>
<span class="linenos">  3</span>
<span class="linenos">  4</span><span class="sd">Este módulo define la interfaz gráfica de la aplicación utilizando Tkinter.</span>
<span class="linenos">  5</span><span class="sd">Contiene la clase Aplicacion, que administra la interacción con el usuario,</span>
<span class="linenos">  6</span><span class="sd">actualiza la vista (incluyendo un gráfico) y se comunica con el controlador.</span>
<span class="linenos">  7</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">  8</span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="linenos">  9</span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">ttk</span><span class="p">,</span> <span class="n">messagebox</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">Frame</span><span class="p">,</span> <span class="n">Entry</span><span class="p">,</span> <span class="n">StringVar</span><span class="p">,</span> <span class="n">Button</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">W</span>
<span class="linenos"> 10</span><span class="kn">from</span> <span class="nn">controlador</span> <span class="kn">import</span> <span class="n">Controlador</span>
<span class="linenos"> 11</span><span class="kn">from</span> <span class="nn">modelo</span> <span class="kn">import</span> <span class="n">Vivienda</span>
<span class="linenos"> 12</span><span class="kn">from</span> <span class="nn">peewee</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos"> 13</span><span class="kn">import</span> <span class="nn">re</span>
<span class="linenos"> 14</span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="linenos"> 15</span><span class="kn">from</span> <span class="nn">matplotlib.backends.backend_tkagg</span> <span class="kn">import</span> <span class="n">FigureCanvasTkAgg</span>
<span class="linenos"> 16</span>
<span class="linenos"> 17</span><span class="k">def</span> <span class="nf">validar_campos</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
<span class="linenos"> 18</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 19</span><span class="sd">    Decorador para validar que los campos de entrada no estén vacíos.</span>
<span class="linenos"> 20</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 21</span>    <span class="k">def</span> <span class="nf">envoltorio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="linenos"> 22</span>        <span class="n">nombre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a_val</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="linenos"> 23</span>        <span class="n">direccion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b_val</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="linenos"> 24</span>        <span class="n">educacion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_val</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="linenos"> 25</span>        
<span class="linenos"> 26</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">nombre</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">direccion</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">educacion</span><span class="p">:</span>
<span class="linenos"> 27</span>            <span class="n">messagebox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Todos los campos son obligatorios.&quot;</span><span class="p">)</span>
<span class="linenos"> 28</span>            <span class="k">return</span>
<span class="linenos"> 29</span>        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="linenos"> 30</span>    <span class="k">return</span> <span class="n">envoltorio</span>
<span class="linenos"> 31</span>
<span class="linenos"> 32</span><span class="k">class</span> <span class="nc">Aplicacion</span><span class="p">:</span>
<span class="linenos"> 33</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 34</span><span class="sd">    Clase principal de la interfaz gráfica.</span>
<span class="linenos"> 35</span>
<span class="linenos"> 36</span><span class="sd">    Configura y administra la ventana principal, maneja eventos (alta, baja, modificación, consulta)</span>
<span class="linenos"> 37</span><span class="sd">    y actualiza tanto el Treeview como el gráfico mostrado.</span>
<span class="linenos"> 38</span><span class="sd">    &quot;&quot;&quot;</span>
<span class="linenos"> 39</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
<span class="linenos"> 40</span>        <span class="c1">#Inicializa la interfaz gráfica y sus componentes.</span>
<span class="linenos"> 41</span>        <span class="bp">self</span><span class="o">.</span><span class="n">controlador</span> <span class="o">=</span> <span class="n">Controlador</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="linenos"> 42</span>        <span class="bp">self</span><span class="o">.</span><span class="n">controlador</span><span class="o">.</span><span class="n">agregar_observador</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="linenos"> 43</span>        <span class="bp">self</span><span class="o">.</span><span class="n">id_modificar</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos"> 44</span>        <span class="c1">#Configuración de la ventana principal.</span>
<span class="linenos"> 45</span>        <span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;ORGANIZACIÓN DE LA COMUNIDAD - Gestor de gobierno popular&quot;</span><span class="p">)</span>
<span class="linenos"> 46</span>        <span class="n">root</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  
<span class="linenos"> 47</span>        <span class="n">root</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 48</span>        <span class="n">root</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="linenos"> 49</span>        
<span class="linenos"> 50</span>        <span class="c1">#Etiqueta de título.</span>
<span class="linenos"> 51</span>        <span class="n">titulo</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;RELEVAMIENTO BARRIAL&quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;#253876&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;#fdc444&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Open Sans ExtraBold&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
<span class="linenos"> 52</span>        <span class="n">titulo</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">E</span><span class="o">+</span><span class="n">W</span><span class="p">)</span>
<span class="linenos"> 53</span>
<span class="linenos"> 54</span>        <span class="c1">#Marco izquierdo para los campos de entrada y botones.</span>
<span class="linenos"> 55</span>        <span class="n">marco_izquierdo</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;#f5efe1&quot;</span><span class="p">)</span>
<span class="linenos"> 56</span>        <span class="n">marco_izquierdo</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="o">+</span><span class="n">S</span><span class="o">+</span><span class="n">E</span><span class="o">+</span><span class="n">W</span><span class="p">)</span>
<span class="linenos"> 57</span>        <span class="n">marco_izquierdo</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 58</span>
<span class="linenos"> 59</span>        <span class="c1">#Marco para gráfico</span>
<span class="linenos"> 60</span>        <span class="bp">self</span><span class="o">.</span><span class="n">marco_grafico</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="linenos"> 61</span>        <span class="bp">self</span><span class="o">.</span><span class="n">marco_grafico</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="o">+</span><span class="n">S</span><span class="o">+</span><span class="n">E</span><span class="o">+</span><span class="n">W</span><span class="p">)</span>
<span class="linenos"> 62</span>        <span class="bp">self</span><span class="o">.</span><span class="n">marco_grafico</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 63</span>        <span class="bp">self</span><span class="o">.</span><span class="n">marco_grafico</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 64</span>
<span class="linenos"> 65</span>        <span class="c1">#Marco para datos (Treeview, ocupa la mitad inferior)</span>
<span class="linenos"> 66</span>        <span class="n">marco_datos</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;lightgrey&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="linenos"> 67</span>        <span class="n">marco_datos</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="o">+</span><span class="n">S</span><span class="o">+</span><span class="n">E</span><span class="o">+</span><span class="n">W</span><span class="p">)</span>
<span class="linenos"> 68</span>        <span class="n">marco_datos</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 69</span>        <span class="n">marco_datos</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos"> 70</span>        
<span class="linenos"> 71</span>        <span class="c1">#Etiquetas para los campos de entrada.</span>
<span class="linenos"> 72</span>        <span class="n">nombre</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">marco_izquierdo</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Nombre y Apellido: &quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;#f5efe1&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;#000000&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Open Sans&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;italic&quot;</span><span class="p">))</span>
<span class="linenos"> 73</span>        <span class="n">nombre</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
<span class="linenos"> 74</span>        <span class="n">direcc</span><span class="o">=</span><span class="n">Label</span><span class="p">(</span><span class="n">marco_izquierdo</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Dirección Relevada: &quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;#f5efe1&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;#000000&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Open Sans&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;italic&quot;</span><span class="p">))</span>
<span class="linenos"> 75</span>        <span class="n">direcc</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
<span class="linenos"> 76</span>        <span class="n">educ</span><span class="o">=</span><span class="n">Label</span><span class="p">(</span><span class="n">marco_izquierdo</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Educación Alcanzada: &quot;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;#f5efe1&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;#000000&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Open Sans&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;italic&quot;</span><span class="p">))</span>
<span class="linenos"> 77</span>        <span class="n">educ</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="p">)</span>
<span class="linenos"> 78</span>
<span class="linenos"> 79</span>        <span class="c1">#Variables para entradas</span>
<span class="linenos"> 80</span>        <span class="bp">self</span><span class="o">.</span><span class="n">a_val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">b_val</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_val</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">(),</span> <span class="n">StringVar</span><span class="p">(),</span> <span class="n">StringVar</span><span class="p">()</span>
<span class="linenos"> 81</span>
<span class="linenos"> 82</span>        <span class="c1">#Campos de entrada.</span>
<span class="linenos"> 83</span>        <span class="n">Entry</span><span class="p">(</span><span class="n">marco_izquierdo</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">a_val</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="o">+</span><span class="n">E</span><span class="p">)</span>
<span class="linenos"> 84</span>        <span class="n">Entry</span><span class="p">(</span><span class="n">marco_izquierdo</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">b_val</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="o">+</span><span class="n">E</span><span class="p">)</span>
<span class="linenos"> 85</span>        <span class="n">Entry</span><span class="p">(</span><span class="n">marco_izquierdo</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">c_val</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">W</span><span class="o">+</span><span class="n">E</span><span class="p">)</span>
<span class="linenos"> 86</span>
<span class="linenos"> 87</span>        <span class="c1">#Botones</span>
<span class="linenos"> 88</span>        <span class="n">Button</span><span class="p">(</span><span class="n">marco_izquierdo</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Alta&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">alta</span><span class="p">(),</span>
<span class="linenos"> 89</span>               <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;#336699&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Open Sans ExtraBold&quot;</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos"> 90</span>        <span class="n">Button</span><span class="p">(</span><span class="n">marco_izquierdo</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Baja&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">borrar</span><span class="p">(),</span>
<span class="linenos"> 91</span>               <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;#336699&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Open Sans ExtraBold&quot;</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos"> 92</span>        <span class="n">Button</span><span class="p">(</span><span class="n">marco_izquierdo</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Modificar&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">modificar</span><span class="p">(),</span>
<span class="linenos"> 93</span>               <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;#336699&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Open Sans ExtraBold&quot;</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos"> 94</span>        <span class="n">Button</span><span class="p">(</span><span class="n">marco_izquierdo</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Consultar lista&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">consulta</span><span class="p">(),</span>
<span class="linenos"> 95</span>               <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;#336699&quot;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Open Sans ExtraBold&quot;</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos"> 96</span>
<span class="linenos"> 97</span>        <span class="c1">#Configuración del Treeview para mostrar los registros.</span>
<span class="linenos"> 98</span>        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Treeview</span><span class="p">(</span><span class="n">marco_datos</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="s2">&quot;col3&quot;</span><span class="p">),</span> <span class="n">show</span><span class="o">=</span><span class="s2">&quot;headings&quot;</span><span class="p">)</span>
<span class="linenos"> 99</span>        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">heading</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Id&quot;</span><span class="p">)</span>
<span class="linenos">100</span>        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">heading</span><span class="p">(</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Nombre y apellido&quot;</span><span class="p">)</span>
<span class="linenos">101</span>        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">heading</span><span class="p">(</span><span class="s2">&quot;col2&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Dirección relevada&quot;</span><span class="p">)</span>
<span class="linenos">102</span>        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">heading</span><span class="p">(</span><span class="s2">&quot;col3&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Educación alcanzada&quot;</span><span class="p">)</span>
<span class="linenos">103</span>        <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="o">+</span><span class="n">S</span><span class="o">+</span><span class="n">E</span><span class="o">+</span><span class="n">W</span><span class="p">)</span>
<span class="linenos">104</span>        <span class="bp">self</span><span class="o">.</span><span class="n">actualizar_vista</span><span class="p">()</span>
<span class="linenos">105</span>
<span class="linenos">106</span>    <span class="k">def</span> <span class="nf">actualizar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">evento</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="linenos">107</span>        <span class="c1">#Actualiza la vista en función del evento notificado.</span>
<span class="linenos">108</span>        <span class="k">if</span> <span class="n">evento</span> <span class="o">==</span> <span class="s2">&quot;alta&quot;</span><span class="p">:</span>
<span class="linenos">109</span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Notificación: Se realizó un alta.&quot;</span><span class="p">)</span>
<span class="linenos">110</span>        <span class="k">elif</span> <span class="n">evento</span> <span class="o">==</span> <span class="s2">&quot;baja&quot;</span><span class="p">:</span>
<span class="linenos">111</span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Notificación: Se realizó una baja.&quot;</span><span class="p">)</span>
<span class="linenos">112</span>        <span class="k">elif</span> <span class="n">evento</span> <span class="o">==</span> <span class="s2">&quot;modificacion&quot;</span><span class="p">:</span>
<span class="linenos">113</span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Notificación: Se realizó una modificación.&quot;</span><span class="p">)</span>
<span class="linenos">114</span>        <span class="bp">self</span><span class="o">.</span><span class="n">actualizar_vista</span><span class="p">()</span>
<span class="linenos">115</span>        <span class="bp">self</span><span class="o">.</span><span class="n">actualizar_grafico</span><span class="p">()</span>
<span class="linenos">116</span>
<span class="linenos">117</span>    <span class="nd">@validar_campos</span>
<span class="linenos">118</span>    <span class="k">def</span> <span class="nf">alta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">119</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">120</span><span class="sd">        Gestiona la operación de alta.</span>
<span class="linenos">121</span>
<span class="linenos">122</span><span class="sd">        Si se tiene un ID para modificar (self.id_modificar), se realiza una actualización;</span>
<span class="linenos">123</span><span class="sd">        de lo contrario, se inserta un nuevo registro.</span>
<span class="linenos">124</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">125</span>        <span class="n">nombre</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">a_val</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="linenos">126</span>        <span class="n">direccion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">b_val</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="linenos">127</span>        <span class="n">educacion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c_val</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="linenos">128</span>        <span class="c1">#Validación: El nombre debe contener solo letras y espacios.</span>
<span class="linenos">129</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]+$&quot;</span><span class="p">,</span> <span class="n">nombre</span><span class="p">):</span>
<span class="linenos">130</span>            <span class="n">messagebox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;El nombre solo puede contener letras y espacios.&quot;</span><span class="p">)</span>
<span class="linenos">131</span>            <span class="k">return</span>
<span class="linenos">132</span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_modificar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">133</span>            <span class="k">try</span><span class="p">:</span>
<span class="linenos">134</span>                <span class="bp">self</span><span class="o">.</span><span class="n">controlador</span><span class="o">.</span><span class="n">realizar_modificacion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id_modificar</span><span class="p">,</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">direccion</span><span class="p">,</span> <span class="n">educacion</span><span class="p">)</span>
<span class="linenos">135</span>                <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s2">&quot;Modificación exitosa&quot;</span><span class="p">,</span> <span class="s2">&quot;El registro ha sido actualizado.&quot;</span><span class="p">)</span>
<span class="linenos">136</span>                <span class="bp">self</span><span class="o">.</span><span class="n">id_modificar</span> <span class="o">=</span> <span class="kc">None</span>
<span class="linenos">137</span>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="linenos">138</span>                <span class="n">messagebox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;No se pudo modificar el registro: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">139</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">140</span>            <span class="k">try</span><span class="p">:</span>
<span class="linenos">141</span>                <span class="bp">self</span><span class="o">.</span><span class="n">controlador</span><span class="o">.</span><span class="n">realizar_alta</span><span class="p">(</span><span class="n">nombre</span><span class="p">,</span> <span class="n">direccion</span><span class="p">,</span> <span class="n">educacion</span><span class="p">)</span>
<span class="linenos">142</span>                <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s2">&quot;Alta de vivienda&quot;</span><span class="p">,</span> <span class="s2">&quot;¡La vivienda fue cargada con éxito!&quot;</span><span class="p">)</span>
<span class="linenos">143</span>            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="linenos">144</span>                <span class="n">messagebox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;No se pudo guardar la vivienda: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">145</span>
<span class="linenos">146</span>        <span class="bp">self</span><span class="o">.</span><span class="n">actualizar_vista</span><span class="p">()</span>
<span class="linenos">147</span>        <span class="bp">self</span><span class="o">.</span><span class="n">actualizar_grafico</span><span class="p">()</span>
<span class="linenos">148</span>
<span class="linenos">149</span>    <span class="nd">@validar_campos</span>
<span class="linenos">150</span>    <span class="k">def</span> <span class="nf">borrar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">151</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">152</span><span class="sd">        Gestiona la operación de baja.</span>
<span class="linenos">153</span>
<span class="linenos">154</span><span class="sd">        Elimina el registro seleccionado tanto de la base de datos como del Treeview.</span>
<span class="linenos">155</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">156</span>        <span class="n">seleccion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">selection</span><span class="p">()</span>
<span class="linenos">157</span>        <span class="k">if</span> <span class="n">seleccion</span><span class="p">:</span>
<span class="linenos">158</span>            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">seleccion</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="linenos">159</span>            <span class="n">vivienda_id</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;values&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">160</span>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Valor de vivienda_id: </span><span class="si">{</span><span class="n">vivienda_id</span><span class="si">}</span><span class="s2"> (tipo: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">vivienda_id</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
<span class="linenos">161</span>            <span class="bp">self</span><span class="o">.</span><span class="n">controlador</span><span class="o">.</span><span class="n">realizar_baja</span><span class="p">(</span><span class="n">vivienda_id</span><span class="p">)</span>
<span class="linenos">162</span>            <span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="s2">&quot;Borrar vivienda&quot;</span><span class="p">,</span> <span class="s2">&quot;¡La vivienda fue borrada con éxito!&quot;</span><span class="p">)</span>
<span class="linenos">163</span>            <span class="bp">self</span><span class="o">.</span><span class="n">actualizar_vista</span><span class="p">()</span>
<span class="linenos">164</span>            <span class="bp">self</span><span class="o">.</span><span class="n">actualizar_grafico</span><span class="p">()</span>
<span class="linenos">165</span>
<span class="linenos">166</span>
<span class="linenos">167</span>    <span class="nd">@validar_campos</span>
<span class="linenos">168</span>    <span class="k">def</span> <span class="nf">modificar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">169</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">170</span><span class="sd">        Gestiona el proceso de modificación.</span>
<span class="linenos">171</span>
<span class="linenos">172</span><span class="sd">        Carga los datos del registro seleccionado en los campos de entrada para que el usuario</span>
<span class="linenos">173</span><span class="sd">        pueda editar y luego actualizar el registro.</span>
<span class="linenos">174</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">175</span>        <span class="n">seleccion_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">selection</span><span class="p">()</span>
<span class="linenos">176</span>        <span class="k">if</span> <span class="n">seleccion_item</span><span class="p">:</span>
<span class="linenos">177</span>            <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">item</span><span class="p">(</span><span class="n">seleccion_item</span><span class="p">)</span>
<span class="linenos">178</span>            <span class="bp">self</span><span class="o">.</span><span class="n">id_modificar</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="linenos">179</span>            <span class="n">nombre</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="linenos">180</span>            <span class="n">direccion</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>
<span class="linenos">181</span>            <span class="n">educacion</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span>
<span class="linenos">182</span>            <span class="c1">#Cargamos los datos en los campos de entrada para editar</span>
<span class="linenos">183</span>            <span class="bp">self</span><span class="o">.</span><span class="n">a_val</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">nombre</span><span class="p">)</span>
<span class="linenos">184</span>            <span class="bp">self</span><span class="o">.</span><span class="n">b_val</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">direccion</span><span class="p">)</span>
<span class="linenos">185</span>            <span class="bp">self</span><span class="o">.</span><span class="n">c_val</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">educacion</span><span class="p">)</span>
<span class="linenos">186</span>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Modificar: ID=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id_modificar</span><span class="si">}</span><span class="s2">, Nombre=</span><span class="si">{</span><span class="n">nombre</span><span class="si">}</span><span class="s2">, Dirección=</span><span class="si">{</span><span class="n">direccion</span><span class="si">}</span><span class="s2">, Educación=</span><span class="si">{</span><span class="n">educacion</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="linenos">187</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">188</span>            <span class="n">messagebox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Seleccione un registro para modificar.&quot;</span><span class="p">)</span>
<span class="linenos">189</span>
<span class="linenos">190</span>
<span class="linenos">191</span>    <span class="k">def</span> <span class="nf">consulta</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">192</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">193</span><span class="sd">        Gestiona la consulta de registros.</span>
<span class="linenos">194</span>
<span class="linenos">195</span><span class="sd">        Recupera los datos de la base de datos y actualiza tanto el Treeview como el gráfico.</span>
<span class="linenos">196</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">197</span>        <span class="bp">self</span><span class="o">.</span><span class="n">controlador</span><span class="o">.</span><span class="n">realizar_consulta</span><span class="p">()</span>
<span class="linenos">198</span>        <span class="bp">self</span><span class="o">.</span><span class="n">actualizar_vista</span><span class="p">()</span>
<span class="linenos">199</span>        <span class="bp">self</span><span class="o">.</span><span class="n">actualizar_grafico</span><span class="p">()</span>
<span class="linenos">200</span>
<span class="linenos">201</span>
<span class="linenos">202</span>    <span class="k">def</span> <span class="nf">actualizar_grafico</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">203</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">204</span><span class="sd">        Actualiza el gráfico mostrado en la interfaz.</span>
<span class="linenos">205</span>
<span class="linenos">206</span><span class="sd">        Crea un gráfico de barras que representa los niveles educativos de los registros.</span>
<span class="linenos">207</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">208</span>        <span class="c1">#Limpia cualquier contenido previo en el marco</span>
<span class="linenos">209</span>        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">marco_grafico</span><span class="o">.</span><span class="n">winfo_children</span><span class="p">():</span>
<span class="linenos">210</span>            <span class="n">widget</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
<span class="linenos">211</span>        <span class="n">educacion_contadores</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;PI&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span><span class="s1">&#39;PC&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="s1">&#39;SI&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;SC&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;TI&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;TC&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;UI&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;UC&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="linenos">212</span>        <span class="n">viviendas</span> <span class="o">=</span> <span class="n">Vivienda</span><span class="o">.</span><span class="n">select</span><span class="p">()</span>
<span class="linenos">213</span>        <span class="k">for</span> <span class="n">vivienda</span> <span class="ow">in</span> <span class="n">viviendas</span><span class="p">:</span>
<span class="linenos">214</span>            <span class="n">educacion</span> <span class="o">=</span> <span class="n">vivienda</span><span class="o">.</span><span class="n">educacion</span>
<span class="linenos">215</span>            <span class="k">if</span> <span class="n">educacion</span> <span class="ow">in</span> <span class="n">educacion_contadores</span><span class="p">:</span>
<span class="linenos">216</span>                <span class="n">educacion_contadores</span><span class="p">[</span><span class="n">educacion</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="linenos">217</span>
<span class="linenos">218</span>        <span class="c1">#Prepara los datos para el gráfico</span>
<span class="linenos">219</span>        <span class="n">categorias</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">educacion_contadores</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="linenos">220</span>        <span class="n">conteos</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">educacion_contadores</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="linenos">221</span>
<span class="linenos">222</span>        <span class="c1">#Se crea el gráfico de barras</span>
<span class="linenos">223</span>        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="linenos">224</span>        <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">categorias</span><span class="p">,</span> <span class="n">conteos</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">)</span>
<span class="linenos">225</span>
<span class="linenos">226</span>        <span class="c1">#Añado el título y las etiquetas</span>
<span class="linenos">227</span>        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;TRAYECTORIA EDUCATIVA RELEVADA&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="linenos">228</span>        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Nivel de Educación&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="linenos">229</span>        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Cantidad de Personas Relevadas&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="linenos">230</span>
<span class="linenos">231</span>        <span class="c1">#Se convierte el gráfico a formato que Tkinter</span>
<span class="linenos">232</span>        <span class="n">canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">marco_grafico</span><span class="p">)</span>
<span class="linenos">233</span>        <span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="linenos">234</span>        <span class="n">canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="n">N</span><span class="o">+</span><span class="n">S</span><span class="o">+</span><span class="n">E</span><span class="o">+</span><span class="n">W</span><span class="p">)</span>
<span class="linenos">235</span>
<span class="linenos">236</span>    <span class="k">def</span> <span class="nf">actualizar_vista</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">237</span><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">238</span><span class="sd">        Actualiza el Treeview con los registros actuales de la base de datos.</span>
<span class="linenos">239</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">240</span>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">get_children</span><span class="p">():</span>
<span class="linenos">241</span>            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
<span class="linenos">242</span>        <span class="n">viviendas</span> <span class="o">=</span> <span class="n">Vivienda</span><span class="o">.</span><span class="n">select</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">Vivienda</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<span class="linenos">243</span>        <span class="k">if</span> <span class="n">viviendas</span><span class="p">:</span>
<span class="linenos">244</span>            <span class="k">for</span> <span class="n">vivienda</span> <span class="ow">in</span> <span class="n">viviendas</span><span class="p">:</span>
<span class="linenos">245</span>                <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">vivienda</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="p">(</span><span class="n">vivienda</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">vivienda</span><span class="o">.</span><span class="n">nombre</span><span class="p">,</span> <span class="n">vivienda</span><span class="o">.</span><span class="n">direccion</span><span class="p">,</span> <span class="n">vivienda</span><span class="o">.</span><span class="n">educacion</span><span class="p">))</span>
<span class="linenos">246</span>        <span class="k">else</span><span class="p">:</span>
<span class="linenos">247</span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No se encontraron registros para mostrar.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="detalle-de-las-clases-y-funciones">
<h2>Detalle de las clases y funciones<a class="headerlink" href="#detalle-de-las-clases-y-funciones" title="Link to this heading">¶</a></h2>
<section id="clase-aplicacion">
<h3>Clase <cite>Aplicacion</cite><a class="headerlink" href="#clase-aplicacion" title="Link to this heading">¶</a></h3>
<p>La clase <cite>Aplicacion</cite> es la encargada de gestionar la interfaz gráfica,
así como la interacción con los componentes de la misma.</p>
<ul class="simple">
<li><p><strong>Método `__init__`:</strong> Inicializa la interfaz gráfica y los componentes principales de la aplicación.</p></li>
<li><p><strong>Método `actualizar`:</strong> Actualiza la vista según el evento que se haya notificado (alta, baja, modificación).</p></li>
<li><p><strong>Método `alta`:</strong> Gestiona la operación de alta de un nuevo registro en la base de datos.</p></li>
<li><p><strong>Método `borrar`:</strong> Gestiona la operación de baja de un registro seleccionado.</p></li>
<li><p><strong>Método `modificar`:</strong> Gestiona el proceso de modificación de un registro seleccionado.</p></li>
<li><p><strong>Método `consulta`:</strong> Recupera los registros de la base de datos y actualiza la vista.</p></li>
<li><p><strong>Método `actualizar_grafico`:</strong> Actualiza el gráfico de barras que muestra los niveles educativos de los registros.</p></li>
<li><p><strong>Método `actualizar_vista`:</strong> Actualiza el Treeview para reflejar los registros actuales de la base de datos.</p></li>
</ul>
</section>
<section id="decorador-validar-campos">
<h3>Decorador <cite>validar_campos</cite><a class="headerlink" href="#decorador-validar-campos" title="Link to this heading">¶</a></h3>
<p>El decorador <cite>validar_campos</cite> asegura que los campos de entrada no estén vacíos antes de realizar cualquier operación (alta, baja, modificación). Si alguno de los campos está vacío, muestra un mensaje de error.</p>
</section>
</section>
<section id="explicacion-del-grafico">
<h2>Explicación del gráfico<a class="headerlink" href="#explicacion-del-grafico" title="Link to this heading">¶</a></h2>
<p>El gráfico generado por el método <cite>actualizar_grafico</cite> representa los niveles educativos de los registros. Utiliza la biblioteca <cite>matplotlib</cite> para crear un gráfico de barras que es incrustado en la interfaz gráfica usando Tkinter.</p>
<p>El gráfico se actualiza cada vez que se realiza una operación en la base de datos (alta, baja, modificación o consulta).</p>
</section>
</section>


	</div>
      </div>

      
      <footer>
  
  <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
    
    <a href="controlador.html" class="btn btn-neutral float-right" title="Módulo «controlador.py»">Next <span class="fa fa-arrow-circle-right"></span></a>
    
    
    <a href="modelo.html" class="btn btn-neutral" title="Módulo «modelo.py»"><span class="fa fa-arrow-circle-left"></span>Previous</a>
    
  </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      &copy; Copyright 2025, Azcuy Nicolás.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/jucacrispim/sphinx_pdj_theme">theme</a> provided by <a href="https://poraodojuca.dev">Porão do Juca</a>.

</footer>
      

      <div class="clearer"></div>
    </div>
  </div>

</section>

<nav data-toggle="wy-nav-shift" class="wy-nav-side">
  <div class="wy-side-nav-search">
    
    <a href="index.html" class="fa fa-home"> App Relevamiento Barrial </a>
    
    
    <div role="search">
      
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Búsqueda" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      
    </div>
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      
      
	  <p class="caption" role="heading"><span class="caption-text">Contenido:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">AppRelevamientoPython</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="main.html">Módulo «main.py»</a></li>
<li class="toctree-l2"><a class="reference internal" href="modelo.html">Módulo «modelo.py»</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Módulo «vista.py»</a></li>
<li class="toctree-l2"><a class="reference internal" href="controlador.html">Módulo «controlador.py»</a></li>
<li class="toctree-l2"><a class="reference internal" href="observador.html">Módulo «observador.py»</a></li>
<li class="toctree-l2"><a class="reference internal" href="servidor.html">Módulo «servidor.py»</a></li>
</ul>
</li>
</ul>

      
    

  </div>
  &nbsp;
</nav>

  </body>
</html>